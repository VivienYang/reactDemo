<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>é¾Ÿå…”èµ›è·‘3</title>
    <script src="https://cdn.bootcss.com/react/16.8.6/umd/react.production.min.js"></script>
    <script src="https://cdn.bootcss.com/react-dom/16.8.6/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.bootcss.com/babel-standalone/7.0.0-beta.3/babel.min.js"></script>
    <style>
        body{
            padding: 0 100px;
            overflow: hidden;
        }
        .header{
            display: flex;
            align-items: center;
            font-size: 30px;
            text-align: center;
        }
        .trackWrapper{
            height: 50px;
            line-height: 50px;
            background:cornflowerblue;
            margin: 20px 0;
        }
        .trackWrapper .animal{
            /* transition: all 1s linear; */
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
    // é¾Ÿå…”èµ›è·‘2
    function TimeRabit(props){//å…”å­ç”¨æ—¶
        return(
            <div>
                <h2>ğŸ‡ç”¨æ—¶</h2>
                <div>{props.result}</div>
            </div>
        )
    }
    function TimeTortoise(props){//ä¹Œé¾Ÿç”¨æ—¶
        return(
            <div>
                <h2>ğŸ¢ç”¨æ—¶</h2>
                <div>{props.result}</div>
            </div>
        )
    }
    class TrackRabit extends React.Component{
        constructor(){
            super()
            let n=0
            this.state={
                animalStyle:{
                    transform: `translateX(${n}%)`
                }
            }
            let runInt = setInterval(() => {
                n+=25
                this.setState({
                    animalStyle:{
                        transform: `translateX(${n}%)`
                    }
                })
                if(n >= 100){
                    //è·‘åˆ°ç»ˆç‚¹ï¼Œå…³æ‰å®šæ—¶å™¨
                    clearInterval(runInt)
                    //è·‘åˆ°ç»ˆç‚¹ï¼Œé€šçŸ¥çˆ¶ç»„ä»¶
                    this.props.success('æˆ‘æ˜¯å°å…”å­')
                }
            }, 1000);
        }
        render(){
            return(
                <div class="trackWrapper">
                    <div class="animal" style={this.state.animalStyle}>ğŸ‡</div>
                    <div class="track"></div>                
                </div>
            )
        }
    }
    class TrackTortoise extends React.Component{
        constructor(){
            super()
            let n=0
            this.state={
                animalStyle:{
                    transform:`translateX(${n}%)`
                }
            }
            let runInt=setInterval(() => {
                n+=20
                this.setState({
                    animalStyle:{
                        transform:`translateX(${n}%)`
                    }
                })
                if(n>=100){
                    //è·‘åˆ°ç»ˆç‚¹ï¼Œå…³æ‰å®šæ—¶å™¨
                    clearInterval(runInt)
                    //è·‘åˆ°ç»ˆç‚¹ï¼Œé€šçŸ¥çˆ¶ç»„ä»¶
                    this.props.success('æˆ‘æ˜¯å°ä¹Œé¾Ÿ')
                }
            }, 1000);
        }
        render(){
            return(
                <div class="trackWrapper">
                    <div class="animal" style={this.state.animalStyle}>ğŸ¢</div>
                    <div class="track"></div>                
                </div>
            )
        }
    }
    class App extends React.Component{
        constructor(){
            super()
            this.state={
                result1:0,
                result2:0
            }
            this.start=new Date()
        }
        successRabit(x){
            //å…”å­è·‘åˆ°ç»ˆç‚¹ï¼Œå­ç»„ä»¶TrackRabité€šçŸ¥çˆ¶ç»„ä»¶åï¼Œ
            //çˆ¶ç»„ä»¶è®¡ç®—ç”¨æ—¶ï¼Œæ›´æ–°result1çš„state
            //result1æ”¹å˜ï¼Œé€šè¿‡propsä¼ é€’ç»™å­ç»„ä»¶TimeRabitï¼Œæ˜¾ç¤ºå…”å­æ¯”èµ›ç”¨æ—¶
            console.log(x)
            let time = new Date() - this.start
            console.log(`å…”å­è·‘åˆ°äº†ç»ˆç‚¹ï¼Œç”¨æ—¶${time}ms`)
            this.setState({
                result1:time
            })
        }
        successTortoise(x){
            //ä¹Œé¾Ÿè·‘åˆ°ç»ˆç‚¹ï¼Œå­ç»„ä»¶TrackTortoiseé€šçŸ¥çˆ¶ç»„ä»¶åï¼Œ
            //çˆ¶ç»„ä»¶è®¡ç®—ç”¨æ—¶ï¼Œæ›´æ–°result2çš„state
            //result2æ”¹å˜ï¼Œé€šè¿‡propsä¼ é€’ç»™å­ç»„ä»¶TimeTortoiseï¼Œæ˜¾ç¤ºä¹Œé¾Ÿæ¯”èµ›ç”¨æ—¶
            console.log(x)
            let time = new Date() - this.start
            console.log(`ä¹Œé¾Ÿè·‘åˆ°äº†ç»ˆç‚¹ï¼Œç”¨æ—¶${time}ms`)
            this.setState({
                result2:time
            })
        }
        render(){
            return(
                <div>
                    <div class="header">
                        <TimeRabit result={this.state.result1}/>
                        <TimeTortoise result={this.state.result2}/>
                    </div>
                    <PlayGround successRabit={this.successRabit.bind(this)} successTortoise={this.successTortoise.bind(this)}/>
                    
                </div>
            )            
        }
    }
    function PlayGround(props){
        return(
            <div class="playGround">
                <TrackRabit success={props.successRabit}/>
                <TrackTortoise success={props.successTortoise}/>
            </div>
        )
    }
    ReactDOM.render(<App />,document.getElementById('root'))
    </script>
</body>
</html>